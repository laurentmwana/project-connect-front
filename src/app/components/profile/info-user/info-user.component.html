<div class="p-4 md:p-6">
  <!-- Skeleton Loader -->
  <div
    *ngIf="userProfileLoading; else profileContent"
    class="flex flex-col items-center text-center mb-6 animate-pulse"
  >
    <!-- Avatar Skeleton -->
    <div class="h-32 w-32 rounded-full bg-gray-200 dark:bg-gray-700 mb-4"></div>

    <!-- Text Skeletons -->
    <div class="space-y-2 w-full max-w-xs">
      <div
        class="h-6 bg-gray-200 dark:bg-gray-700 rounded mx-auto"
        style="width: 60%"
      ></div>
      <div
        class="h-4 bg-gray-200 dark:bg-gray-700 rounded mx-auto"
        style="width: 80%"
      ></div>
      <div
        class="h-4 bg-gray-200 dark:bg-gray-700 rounded mx-auto mt-3"
        style="width: 50%"
      ></div>
    </div>

    <!-- Divider -->
    <div class="shrink-0 bg-border h-px w-full my-6"></div>

    <!-- Contact Info Skeletons -->
    <div class="space-y-4 w-full max-w-xs">
      <div *ngFor="let item of [1, 2, 3, 4]" class="flex items-center">
        <div
          class="h-4 w-4 bg-gray-200 dark:bg-gray-700 rounded-full mr-3"
        ></div>
        <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded flex-1"></div>
      </div>
    </div>

    <!-- Divider -->
    <div class="shrink-0 bg-border h-px w-full my-6"></div>

    <!-- Stats Skeletons -->
    <div class="grid grid-cols-2 gap-4 w-full max-w-xs mx-auto">
      <div *ngFor="let item of [1, 2]" class="flex flex-col items-center">
        <div class="h-6 w-12 bg-gray-200 dark:bg-gray-700 rounded mb-1"></div>
        <div class="h-4 w-16 bg-gray-200 dark:bg-gray-700 rounded"></div>
      </div>
    </div>

    <!-- Button Skeletons -->
    <div class="mt-6 space-y-3 w-full max-w-xs">
      <div class="h-10 bg-gray-200 dark:bg-gray-700 rounded-md"></div>
      <div
        *ngIf="isOwnProfile"
        class="h-10 bg-gray-200 dark:bg-gray-700 rounded-md"
      ></div>
    </div>
  </div>

  <!-- Profile Content -->
  <ng-template #profileContent>
    <div
      *ngIf="userProfile"
      class="flex flex-col items-center text-center mb-6"
    >
      <!-- Avatar -->
      <div
        class="relative h-32 w-32 rounded-full border-2 border-accent bg-accent flex items-center justify-center text-accent-foreground text-4xl font-bold mb-4 overflow-hidden"
      >
        <img
          *ngIf="userProfile?.profile_photo; else initialsTemplate"
          [src]="userProfile.profile_photo"
          [alt]="userProfile.name || 'User photo'"
          class="h-full w-full object-cover"
        />
        <ng-template #initialsTemplate>
          {{ userProfile.name | textInitial }}
        </ng-template>
      </div>

      <!-- Name and Title -->
      <h1 class="text-2xl font-bold text-foreground">
        {{ userProfile.name || "John Doe" }}
      </h1>
      <p class="text-muted-foreground mt-1">
        {{ userProfile.job_title || "UX/UI Designer & Developer" }}
      </p>

      <!-- Location -->
      <div
        class="flex items-center justify-center text-sm text-muted-foreground mt-3"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-map-pin mr-1.5"
        >
          <path
            d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"
          />
          <circle cx="12" cy="10" r="3" />
        </svg>
        <span>{{ userProfile.location || "San Francisco, CA" }}</span>
      </div>
    </div>

    <!-- Divider -->
    <div class="shrink-0 bg-border h-px w-full my-6"></div>

    <!-- Contact Info -->
    <div class="space-y-3">
      <!-- Email -->
      <div class="flex items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-mail text-muted-foreground mr-3"
        >
          <rect width="20" height="16" x="2" y="4" rx="2" />
          <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
        </svg>
        <span class="text-sm text-foreground">
          {{ userProfile?.email || "john.doe@example.com" }}
        </span>
      </div>

      <!-- Phone -->
      <div class="flex items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-phone text-muted-foreground mr-3"
        >
          <path
            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
          />
        </svg>
        <span class="text-sm text-foreground">
          {{ userProfile?.phone || "+1 (555) 123-4567" }}
        </span>
      </div>

      <!-- Portfolio -->
      <div class="flex items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-globe text-muted-foreground mr-3"
        >
          <circle cx="12" cy="12" r="10" />
          <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20" />
          <path d="M2 12h20" />
        </svg>
        <a
          [href]="userProfile?.portfolio_url || '#'"
          target="_blank"
          class="text-sm text-primary hover:underline"
        >
          {{ userProfile?.portfolio_url || "johndoe.portfolio.com" }}
        </a>
      </div>

      <!-- Availability -->
      <div class="flex items-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-calendar text-muted-foreground mr-3"
        >
          <path d="M8 2v4" />
          <path d="M16 2v4" />
          <rect width="18" height="18" x="3" y="4" rx="2" />
          <path d="M3 10h18" />
        </svg>
        <span class="text-sm text-foreground">
          {{ userProfile?.is_availability || "Disponible" }}
        </span>
      </div>
    </div>

    <!-- Divider -->
    <div class="shrink-0 bg-border h-px w-full my-6"></div>

    <!-- Stats -->
    <div class="grid grid-cols-2 gap-4 text-center">
      <div
        (click)="navigateToConnections()"
        class="cursor-pointer hover:bg-accent/50 rounded-lg py-2 transition-colors"
      >
        <p class="text-2xl font-bold text-foreground">{{ totalConnections }}</p>
        <p class="text-sm text-muted-foreground">Connections</p>
      </div>
      <div class="hover:bg-accent/50 rounded-lg py-2 transition-colors">
        <p class="text-2xl font-bold text-foreground">8</p>
        <p class="text-sm text-muted-foreground">Projects</p>
      </div>
    </div>

    <!-- Actions -->
    <div class="mt-6 space-y-3">
      <!-- Message Button -->
      <button
        *ngIf="!isOwnProfile"
        (click)="onMessageClick()"
        class="inline-flex items-center justify-center w-full h-10 px-4 py-2 text-sm font-medium transition-colors rounded-md bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
      >
        Message
      </button>

      <!-- Edit Profile Button -->
      <ng-container *ngIf="isOwnProfile">
        <a
          href="/profile/edit"
          class="inline-flex items-center justify-center w-full h-10 px-4 py-2 text-sm font-medium transition-colors rounded-md bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
        >
          Modifier le profil
        </a>

        <!-- Logout Button -->
        <button
          (click)="onLogoutClick()"
          class="inline-flex items-center justify-center w-full h-10 px-4 py-2 text-sm font-medium transition-colors rounded-md bg-destructive text-destructive-foreground hover:bg-destructive/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"
        >
          DÃ©connexion
        </button>
      </ng-container>
    </div>
  </ng-template>
</div>
